function t(t,e,n){if(e=e||{},arguments.length>3){n=[n];for(let t=3;t<arguments.length;t++)n.push(arguments[t])}null!=n&&(e.children=n);let r={type:t,props:e},o=e.key;return null!=o&&(r.key=""+o),r}function e(e){return null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e?t(null,null,""+e):e}const n=[],r={},o={},a="@ctx.",l="@state",i="@type",s="host",c=97,u=116,p=79,d=77,h=73,f=67,m={children:1},y={innerHTML:1,textContent:1,contenteditable:1},b={};function g(t,e){let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function w(t,e){for(let n in e)t[n]=e[n];for(let e=2;e<arguments.length;e++)w(t,arguments[e]);return t}let k,v,x=Promise.prototype.then.bind(Promise.resolve());function C(t,e,n,o,a,l,i){if(("checked"==e||"value"==e)&&e in t&&(n=t[e]),o!=n)if("o"!=e[0]||"n"!=e[1]||"function"!=typeof o&&"function"!=typeof n)switch(e){case"ref":o&&(o.current=t);break;case"style":!function(t,e,n){let r=e,o=n;if("object"==typeof o){o="";for(let t in n)n[t]&&(b[t]||(b[t]=t.replace(/([A-Z])/g,"-$1").toLowerCase()),o+=`${b[t]}:${n[t]};`)}r!=o&&(t.style.cssText=o)}(t,n||t.style.cssText,o);break;case"shadowDom":return void("attachShadow"in t&&(t.shadowRoot&&!o||!t.shadowRoot&&o)&&t.attachShadow({mode:o?"open":"closed"}));case"key":e="data-key",null==o?delete t.dataset.key:t.dataset.key=o;break;case"class":case"className":e=a?"class":"className";default:"list"!=e&&!a&&e in t?t[e]=null==o?"":o:null==o?t.removeAttribute(e):t.setAttribute(e,o)}else!function(t,e,n,o,a){r[e]||(r[e]=e.slice(2).toLocaleLowerCase());e=r[e],o.handleEvent||(o.handleEvent=(t=>o[t.type].call(a,t)));n?(o[e]||t.addEventListener(e,o),o[e]=n):o[e]&&(t.removeEventListener(e,o),delete o[e])}(t,e,o,l,i)}function A(){if(!k)throw new Error("the hooks can only be called from an existing functional component in the diff queue");return k}function R(t,e){let n,r,o=A().component,a=v++;return o.hooks[a]||(r=!0,o.hooks[a]={state:e}),(n=o.hooks[a]).reducer=t,r&&E(n,{type:c}),[n.state,t=>E(n,t)]}function E(t,e){t.reducer&&(t.state=t.reducer(t.state,e))}function $(t,e){let n=t.length;for(let r=0;r<n;r++){let n=t[r],o=n.hooks,a=o.length;e.type===f&&(n.remove=!0);for(let t=0;t<a;t++)E(o[t],e)}}function D(t,n){let r,o=[];function a(l,i,s,c){switch(l){case u:return r=i,function l(i,s,c){if(!r)return;if("function"!=typeof(i=e(i)).type)return $(o.splice(c),{type:f}),r=P(t,r,i,s,n,a),void(o.length&&(r[t.id].updateComponent=a));let h,m,y=o[c]||{};y.type!=i.type&&($(o.splice(c),{type:f}),o[c]=w({hooks:[],context:{}},i),h=!0,m=!0),y=o[c];let b=i.props,g=y.props;if(!m){let t=Object.keys(g).length,e=0;for(let t in b)if(e++,b[t]!=g[t]){m=!0;break}m=m||t!=e}m=y.context!=s||m,y.props=b,y.context=s,m&&!y.prevent&&function t(){if(y.remove)return r;k={component:y,next(){y.prevent||(y.prevent=!0,x(()=>{y.prevent=!1,t()}))}},v=0,$([y],{type:u});let e=y.type(y.props);k=!1,v=0,l(e,y.context,c+1),$([y],{type:h?p:d}),h=!1}()}(s,c,0),r;case h:$([].concat(o).reverse(),{type:l});break;case f:r=!1,$(o.reverse(),{type:l}),o=[]}}return a}function P(t,e,n,r,o,a){let{vnode:l,updateComponent:c,handlers:p={}}=e&&e[t.id]||{};if(l==n)return e;l=l||{props:{}};let{type:d,props:h}=n,{shadowDom:f,children:b}=h,g="function"==typeof d;if(o=o||"svg"==d,g&&!c&&(c=D(t,o)),!g&&d!=s&&function(t){if(!t)return;if(!t[i]){let e=t.nodeName.toLowerCase();t[i]="#text"==e?null:e}return t[i]}(e)!==d){let n=T(d,o),r=e&&e.parentNode;r&&(S(t,e,!0,a),r.replaceChild(n,e)),e=n,p={}}if(c&&a!=c)return c(u,e,n,r);if(null==d)e.nodeValue!=b&&(e.nodeValue=b);else{(function(t,e,n,r,o,a){e=e||{};for(let a in e)m[a]||a in n||C(t,a,e[a],null,r,o);let l;for(let i in n)m[i]||(C(t,i,e[i],n[i],r,o,a),l=l||y[i]);return l})(e,l.props,n.props,o,p,t.bind)||l.props.children==b||function(t,e,n,r,o){let a=[],l=N(n,!1,a),i=l.length,s=e.childNodes,c={},u=s.length,p=a.withKeyes,d=p?0:u>i?i:u;for(;d<u;d++){let n=s[d],r=d;p&&(r=n.dataset.key,a.indexOf(r)>-1)?c[r]=n:(S(t.id,n),d--,u--,e.removeChild(n))}for(let n=0;n<i;n++){let a=l[n],i=s[n],u=s[n+1],d=p?a.key:n,h=p?c[d]:i;p&&h!=i&&e.insertBefore(h,i);let f=P(t,h||"function"!=typeof a.type?h:T(null),a,r,o);h||(u?e.insertBefore(f,u):e.appendChild(f))}}(t,f&&e.shadowRoot||e,b,r,o)}return e[t.id]={vnode:n,handlers:p},e}function S(t,e,n,r){let{updateComponent:o}=e[t]||{},a=e.childNodes,l=a.length;o&&o!=r&&o(n?h:f);for(let e=0;e<l;e++)S(t,a[e])}function T(t,e){let n,r=document;return(n=null!=t?e?r.createElementNS("http://www.w3.org/2000/svg",t):r.createElement(t):r.createTextNode(""))[i]=t,n}function N(t,r,o,a,l=0){if(o=o||[],a=a||[],i=t,Array.isArray(i)){let e=t.length;for(let n=0;n<e;n++)N(t[n],r,o,a,l+1)}else{if(null==t&&!l)return n;let i=r?r(t,a.length):e(t);r||"object"==typeof i&&null!=i.key&&-1==o.indexOf(i.key)&&(o.push(i.key),o.withKeyes=!0),a.push(i)}var i;return a}function L(n,r,a=o){let i={id:a.id||l,bind:a.bind,host:a.host};n=e(n),i.host||n.type==s||(n=t(s,{},n)),P(i,r,n,o)}function j(t,e){let[n]=R(!1,{});return n.args&&g(n.args,e)||(n.value=t()),n.args=e,n.value}let _=0;function B({id:t,defaultValue:e}){let n=A().component;return t in n.context?n.context[t]:e}function M(t){let e=a+_++,n={Provider:function({value:t,children:n}){let{component:r}=A();r.context[e]!=t&&(r.context=w({},r.context,{[e]:t}));return n},Consumer:function({children:t}){return t(B(n))},id:e,defaultValue:t};return n}let O=t,V=/([^\/]+)/g,z="[^\\/]",H="(?:\\/){0,1}",K=/^(:)(\w+)(\?|(\.){3}){0,1}/,Z={},q={};function F(t){return t.replace(/(\/){2,}/g,"/").replace(/([^\/]+)\/$/,"$1")}function J(t,e){t=F(t),e=F(e),q[t]||(q[t]=function(t){let e=t.match(V)||[""],n=[];return{regexp:new RegExp("^"+e.map(t=>{let[e,r,o,a]=t.match(K)||[];return r?(n.push(o),"..."===a?"(.*)":"?"===a?`${H}(${z}*)`:`\\/(${z}+)`):`\\/(?:${t.replace(/(\.|\-)/g,"\\$1").replace(/\*/g,z+"+").replace(/\((?!\?\:)/g,"(?:")})`}).join("")+"$","i"),params:n,logs:{}}}(t));let{regexp:n,params:r,logs:o}=q[t];if(o[e])return o[e];let a=e.match(n);return o[e]=[!!a,a?a.slice(1).reduce((t,e,n)=>(t[r[n]||n]=e,t),{}):Z]}function U(t="",e=""){return F(t.replace(/\/(:[\w]+...){0,1}$/,"")+"/"+e.replace(/^\//,""))}let G={pathname:()=>location.pathname,redirect(t){t!=G.pathname()&&(history.pushState({},"history",t),window.dispatchEvent(new PopStateEvent("popstate")))},setRootDefault(t){Q.defaultValue=t}},I=M("/"),Q=M("");function W(){let t=G.pathname(),[e,n]=function(t){let e=A().next,[n,r]=R((e,n)=>{switch(n.type){case c:return"function"==typeof t?t():t;case 159:let r=n.state;return"function"==typeof r?r(e):r}return e});return[n,t=>{r({state:t,type:159}),e()}]}({pathname:t});var r,o;return r=(()=>{function t(){let t=G.pathname();e.pathname!=t&&(e.pathname=t,n(e))}return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)}),o=[],R((t,e)=>{switch(e.type){case c:return{args:o};case u:case f:return t.clear&&(e.type==f||!o||!t.args||!g(o,t.args))&&t.clear.then(t=>t&&t()),w({},t,{args:o});case p:case d:let n=e.type==p||!o||!t.args||!g(o,t.args),a=t.clear;return n&&(a=x(r)),w({},t,{clear:a,args:o})}return t}),[t,G.redirect]}function X(){let t=B(I);return U(B(Q),t)}function Y(t){return W(),function(t){let e=G.pathname(),n=X();return j(()=>[...J(U(n,t),e)],[t,e,n])}(t)}function tt({children:t}){let[e]=Y("/:pathname..."),n=G.pathname(),r=X();if(e){t=N(t);for(let e=0;e<t.length;e++){let{type:o,props:a}=t[e],{path:l,...i}=a,s=U(r,l),[c,u]=J(s,n);if(c)return i.params=u,O(I.Provider,{value:s},O(o,i))}}}function et({children:t,path:e}){return O(Q.Provider,{value:e},t)}function nt(t){return JSON.parse(t)}class rt extends HTMLElement{constructor(){super(),this.props={},this.mounted=new Promise(t=>this.mount=t),this.unmounted=new Promise(t=>this.unmount=t)}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}attributeChangedCallback(t,e,n){e!=n&&this.setProperty(t,n)}static get observedAttributes(){let t=this.observables||{},e=[],n=t=>{Object.defineProperty(this.prototype,t,{set(e){this.setProperty(t,e)},get(){return this.props[t]}})};for(let r in t){let t=r.replace(/([A-Z])/g,"-$1").toLowerCase();e.push(t),name in this.prototype||n(r)}return e}setProperty(t,e){t=t.replace(/-(\w)/g,(t,e)=>e.toUpperCase());let n,{observables:r}=this.constructor,o=r[t];try{if("string"==typeof e)switch(o){case Boolean:e=1==nt(e||"true");break;case Number:e=Number(e);break;case Object:case Array:e=nt(e);break;case Function:e=window[e]}}catch(t){n=!0}if(n||{}.toString.call(e)!=`[object ${o.name}]`)throw`the observable [${t}] must be of the type [${o.name}]`;this.update({[t]:e})}}let ot=0;class at extends rt{constructor(){let t;super();let e={id:"@wc."+ot++,bind:this,host:!0},{styles:n}=this.constructor;this.render=this.render.bind(this),this.update=(r=>{this.props={...this.props,...r},t||(t=!0,this.mounted.then(()=>{t=!1,L(O(this.render,this.props),this,e),n&&this.shadowRoot&&(this.shadowRoot.adoptedStyleSheets=n,n=null)}))}),this.unmounted.then(()=>L("",this,e)),this.update()}}function lt(t,e){return customElements.define(t,e instanceof at?e:function(t){let e=class extends at{};return e.prototype.render=t,e.observables=t.observables,e.styles=t.styles,e}(e)),e=>O(t,e)}let it={ADD_CART:Symbol("ADD_CART"),REM_CART:Symbol("REM_CART")};function st(t,{type:e,data:n}){switch(e){case it.ADD_CART:let r;return t=t.map(t=>t.id==n.id?(r=!0,{...t,count:t.count+1}):t),r?t:t.concat({...n,count:1});case it.REM_CART:return t.map(t=>t.id==n.id?{...t,count:t.count-1}:t).filter(t=>t.count>0)}}var ct=lt("atomico-store-header",function(){return O("host",{shadowDom:!0},O("style",null,"\n\t\t\t\t\t:host {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tbackground: var(--theme-atomico-dark, black);\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tpadding: 0.75rem;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t}\n\t\t\t\t"),O("slot",null))});function ut({checked:t,counter:e}){return O("host",{shadowDom:!0,class:t?"checked":""},O("style",null,"\n\t\t\t\t\t:host {\n\t\t\t\t\t\tpadding: 0.25rem 1rem;\n\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tbackground: var(--theme-atomico-dark, black);\n\t\t\t\t\t\tcolor: var(--theme-atomico-white, white);\n\t\t\t\t\t}\n\t\t\t\t\t:host(.checked) {\n\t\t\t\t\t\tbackground: var(--theme-atomico-white, white);\n\t\t\t\t\t\tcolor: var(--theme-atomico-dark, black);\n\t\t\t\t\t}\n\n\t\t\t\t\t.counter {\n\t\t\t\t\t\twidth: 16px;\n\t\t\t\t\t\theight: 16px;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tmargin-left: 0.5rem;\n\t\t\t\t\t\tbackground: var(--theme-atomico-white, white);\n\t\t\t\t\t\tcolor: var(--theme-atomico-dark, black);\n\t\t\t\t\t}\n\n\t\t\t\t\t:host(.checked) .counter {\n\t\t\t\t\t\tbackground: var(--theme-atomico-dark, black);\n\t\t\t\t\t\tcolor: var(--theme-atomico-white, white);\n\t\t\t\t\t}\n\t\t\t\t"),O("slot",null),e>0&&O("div",{class:"counter"},e))}ut.observables={checked:Boolean,counter:Number};var pt=lt("atomico-store-button",ut);function dt({labelButton:t}){return O("host",{shadowDom:!0},O("style",null,"\n\t\t\t\t:host {\n\t\t\t\t\tflex: 0%;\n\t\t\t\t\tpadding: 1rem;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tmargin: 1rem;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\tbox-shadow: 0px 6px 12px rgba(0, 0, 0, 0.05);\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t}\n\t\t\t"),O("slot",null))}dt.observables={labelButton:String};var ht=lt("atomico-store-card",dt);function ft({products:t,addCart:e}){return O("section",null,t.map(({title:t,id:n,price:r})=>O(ht,{key:n},O("p",null,O("strong",null,t)," - ",r),O(pt,{onClick:()=>{e({title:t,id:n,price:r})}},"add to cart"))))}function mt({products:t,remCart:e}){return O("section",null,t.map(({title:t,id:n,price:r,count:o})=>O(ht,{key:n},O("p",null,O("strong",null,t)," - ",r," x ",o),O(pt,{onClick:()=>{e({title:t,id:n,price:r})}},"remove to cart"))))}function yt({products:t}){let[e,n]=function(t,e){let n=A().next,[r,o]=R((n,r)=>{switch(r.type){case c:return e;case 158:return t(n,r.use)}return n});return[r,t=>{o({type:158,use:t}),n()}]}(st,[]),r=function(){let t=B(Q);return j(()=>e=>{G.redirect(U(t,e))},[t])}(),[o,a]=Y("/:page/:any...");return O("host",{shadowDom:!0},O("style",null,"\n\t\t\t\t\t\t:host {\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\tbackground: #f9fafc;\n\t\t\t\t\t\t}\n\t\t\t\t\t"),O(ct,null,O(pt,{onClick:()=>r("/"),checked:null==a.page},"Products"),O(pt,{counter:e.reduce((t,{count:e})=>t+e,0),onClick:()=>r("/cart"),checked:"cart"==a.page},"Cart")),O(tt,null,O(ft,{path:"/",products:t,addCart:t=>{n({type:it.ADD_CART,data:t})}}),O(mt,{path:"/cart",products:e,remCart:t=>{n({type:it.REM_CART,data:t})}})))}function bt({products:t,location:e}){return O(et,{path:e},O(yt,{products:t}))}bt.observables={products:Array,location:String},lt("atomico-store",bt);
//# sourceMappingURL=index.js.map
