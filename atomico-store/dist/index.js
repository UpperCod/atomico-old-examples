import{a as t,b as e,c as a,d as n,e as r,f as o,g as i,h as c,i as l}from"./chunk-fc5b03b8.js";let u={pathname:()=>location.pathname,redirect(t){t!=u.pathname()&&(history.pushState({},"history",t),window.dispatchEvent(new PopStateEvent("popstate")))},subscribe:t=>(window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t))},s=/([^\/]+)/g,p="[^\\/]",d="(?:\\/){0,1}",h=/^(:)(\w+)(\?|(\.){3}){0,1}/,f={},m={};function g(t){return t.replace(/(\/){2,}/g,"/").replace(/([^\/]+)\/$/,"$1")}function b(t,e){t=g(t),e=g(e),m[t]||(m[t]=function(t){let e=t.match(s)||[""],a=[];return{regexp:new RegExp("^"+e.map(t=>{let[e,n,r,o]=t.match(h)||[];return n?(a.push(r),"..."===o?"(.*)":"?"===o?`${d}(${p}*)`:`\\/(${p}+)`):`\\/(?:${t.replace(/(\.|\-)/g,"\\$1").replace(/\*/g,p+"+").replace(/\((?!\?\:)/g,"(?:")})`}).join("")+"$","i"),params:a,logs:{}}}(t));let{regexp:a,params:n,logs:r}=m[t];if(r[e])return r[e];let o=e.match(a);return r[e]=[!!o,o?o.slice(1).reduce((t,e,a)=>(t[n[a]||a]=e,t),{}):f]}function w(){let t=u.pathname(),[n,r]=e({pathname:t});return a(()=>{return u.subscribe(function(){let t=u.pathname();n.pathname!=t&&(n.pathname=t,r(n))})},[]),[t,u.redirect]}function y(t){return w(),function(t){return b(t,u.pathname())}(t)}function A({children:e}){let a,o,[i]=w(),c=(e=t(()=>n(e),[e])).length;for(let t=0;t<c;t++){let n=e[t];if(n.props.path){let[t,e]=b(n.props.path,i);if(t){a=n,o=e;break}}n.props.default&&(a=n)}if(a){let{type:t,props:e}=a,n={...e,params:o};return delete n.path,delete n.default,r(t,n)}}function C(t){return({loading:n,...i})=>{let c=function(t,n){let[r,o]=e({wait:!0});return a(()=>{let e=!0;return t(n).then(t=>{e&&o(t),e=!1}),function t(e,a=3){a--?requestAnimationFrame(()=>t(e,a)):e()}(()=>{e&&o({loading:!0})}),()=>e=!1},[t]),r}(t,i);if(!c.wait)return c.loading?n:o(c.default)?r(c.default,i):c.default}}let R={ADD_CART:Symbol("ADD_CART"),REM_CART:Symbol("REM_CART")};function $(t,{type:e,data:a}){switch(e){case R.ADD_CART:let n;return t=t.map(t=>t.id==a.id?(n=!0,{...t,count:t.count+1}):t),n?t:t.concat({...a,count:1});case R.REM_CART:return t.map(t=>t.id==a.id?{...t,count:t.count-1}:t).filter(t=>t.count>0)}}var k=":host{width:100%;background:var(--theme-atomico-dark,#000);display:flex;justify-content:center;align-items:center;padding:.75rem;box-sizing:border-box}";var D=i("atomico-store-header",function(){return r("host",{shadowDom:!0},r("style",null,k),r("slot",null))}),v=":host{width:100%;height:100%;display:block;background:#f9fafc}";let E=C(()=>import("./index-912d319a.js")),x=C(()=>import("./index-bb6a7eb9.js"));function T({products:e,location:a="/"}){let[n,o]=c($,[]),i=function(e){let a=u.redirect;return t(()=>e?t=>a(t):a,[e,a])}(),[s,p]=y(`${a}/:page/:any...`);return r("host",{shadowDom:!0},r("style",null,v),r(D,null,r(l,{onClick:()=>i(a),checked:null==p.page},"Products"),r(l,{counter:n.reduce((t,{count:e})=>t+e,0),onClick:()=>i(`${a}cart`),checked:"cart"==p.page},"Cart")),r(A,null,r(x,{path:`${a}/cart`,loading:"...loading!",products:n,remCart:t=>{o({type:R.REM_CART,data:t})}}),r(E,{default:!0,loading:"...loading!",products:e,addCart:t=>{console.log(o),o({type:R.ADD_CART,data:t})}})))}T.observables={products:Array,location:String},i("atomico-store",T);
//# sourceMappingURL=index.js.map
